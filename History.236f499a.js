function e(e){return e&&e.__esModule?e.default:e}function s(e,s,t,r){Object.defineProperty(e,s,{get:t,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2;t.register("52Vav",(function(r,a){var l;l=r.exports,Object.defineProperty(l,"__esModule",{value:!0,configurable:!0}),s(r.exports,"default",(function(){return f}));var i=t("bbzbN"),n=t("9GPfD"),c=t("7fPBF"),d=t("8bTKe"),o=t("frKfJ"),h=t("UBbba"),x=t("euEFD");t("lKVTQ");var u=t("c6PTv"),m=t("jmYrh");function b({length:e}){return i.jsx("span",{children:e>1e5?`${(e/1e5).toFixed(1)} km`:e>100?`${(e/1e3).toFixed(1)} m`:e>10?`${(e/10).toFixed(1)}cm`:`${e.toFixed(1)}mm`})}function j({duration:e}){return i.jsx("span",{children:e>172800?`${(e/86400).toFixed(1)} days`:e>3600?`${(e/3600).toFixed(1)} h`:e>60?`${(e/60).toFixed(1)} min`:`${e.toFixed(1)}s`})}function f(){const{rpc:s}=x.default(),[t,r]=c.useState([]),[a,l]=c.useState(null);return c.useEffect((()=>{s&&(s.call("server.history.totals").then((({job_totals:e})=>{l(e)})),s.call("server.history.list").then((({count:e,jobs:s})=>{r(s),console.log(e,s.length)})))}),[s,r,l]),m.useRpcHandler(s,"notify_history_changed",(([{action:e,job:s}])=>{console.log(e,s),r(n.produce((e=>{e.unshift(s)})))})),i.jsxs("section",{children:[i.jsx("h2",{className:e(h)("text-xl"),children:"History"}),i.jsx("article",{className:e(h)("flex","flex-row"),children:a&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:e(h)("card","bg-base-100","dark:bg-base-300","shadow-xl","mr-1"),children:i.jsxs("div",{className:e(h)("card-body"),children:[i.jsx("h2",{className:e(h)("card-title"),children:"Longest Job"}),i.jsx(j,{duration:a.longest_job})]})}),i.jsx("div",{className:e(h)("card","bg-base-100","dark:bg-base-300","shadow-xl","mr-1"),children:i.jsxs("div",{className:e(h)("card-body"),children:[i.jsx("h2",{className:e(h)("card-title"),children:"Longest Print"}),i.jsx(j,{duration:a.longest_print})]})}),i.jsx("div",{className:e(h)("card","bg-base-100","dark:bg-base-300","shadow-xl","mr-1"),children:i.jsxs("div",{className:e(h)("card-body"),children:[i.jsx("h2",{className:e(h)("card-title"),children:"Filament Used"}),i.jsx(b,{length:a.total_filament_used})]})}),i.jsx("div",{className:e(h)("card","bg-base-100","dark:bg-base-300","shadow-xl","mr-1"),children:i.jsxs("div",{className:e(h)("card-body"),children:[i.jsx("h2",{className:e(h)("card-title"),children:"Total Jobs"}),a.total_jobs]})}),i.jsx("div",{className:e(h)("card","bg-base-100","dark:bg-base-300","shadow-xl","mr-1"),children:i.jsxs("div",{className:e(h)("card-body"),children:[i.jsx("h2",{className:e(h)("card-title"),children:"Print Time"}),i.jsx(j,{duration:a.total_print_time})]})}),i.jsx("div",{className:e(h)("card","bg-base-100","dark:bg-base-300","shadow-xl","mr-1"),children:i.jsxs("div",{className:e(h)("card-body"),children:[i.jsx("h2",{className:e(h)("card-title"),children:"Total Time"}),i.jsx(j,{duration:a.total_time})]})})]})}),i.jsxs("table",{className:e(h)("table","table-compact","text-sm"),children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Filename"}),i.jsx("th",{children:"Start"}),i.jsx("th",{children:"Status"}),i.jsx("th",{children:"Total Time"}),i.jsx("th",{children:"Print Time"}),i.jsx("th",{children:"Filament Used"})]})}),i.jsx("tbody",{className:e(h)("text-sm"),children:t.map((s=>i.jsxs("tr",{children:[i.jsx("td",{className:e(h)("line-clamp-1"),children:s.filename}),i.jsx("td",{children:new Date(1e3*s.start_time).toLocaleString()}),i.jsx("td",{title:s.status,children:(()=>{switch(s.status){case u.JobStatus.Printing:case u.JobStatus.InProgress:return i.jsx(d.BsClock,{size:"1.5rem",className:e(h)("fill-primary","-m-0.5")});case u.JobStatus.Completed:return i.jsx(d.BsCheckCircle,{size:"1.5rem",className:e(h)("fill-success","-m-0.5")});case u.JobStatus.Cancelled:return i.jsx(d.BsXCircle,{size:"1.5rem",className:e(h)("fill-info","-m-0.5")});case u.JobStatus.Error:case u.JobStatus.Server_Exit:case u.JobStatus.Klippy_Shutdown:case u.JobStatus.Klippy_Disconnect:return i.jsx(o.TbAlertTriangle,{size:"1.5rem",className:e(h)("fill-error","-m-0.5")})}})()}),i.jsx("td",{children:i.jsx(j,{duration:s.total_duration})}),i.jsx("td",{children:i.jsx(j,{duration:s.print_duration})}),i.jsx("td",{children:i.jsx(b,{length:s.filament_used})})]},s.job_id)))})]})]})}})),t.register("lKVTQ",(function(e,r){s(e.exports,"JobStatus",(function(){return t("c6PTv").JobStatus})),t("kjobl"),t("c6PTv"),t("4Lo2d"),t("9rQ0m")})),t.register("kjobl",(function(e,s){})),t.register("c6PTv",(function(e,t){let r;s(e.exports,"JobStatus",(function(){return r})),function(e){e.Completed="completed",e.Cancelled="cancelled",e.Error="error",e.Printing="printing",e.InProgress="in_progress",e.Server_Exit="server_exit",e.Klippy_Shutdown="klippy_shutdown",e.Klippy_Disconnect="klippy_disconnect"}(r||(r={}))})),t.register("4Lo2d",(function(e,s){})),t.register("9rQ0m",(function(e,s){}));
//# sourceMappingURL=History.236f499a.js.map
