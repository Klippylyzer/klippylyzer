(function(){"use strict";function l(e,t){const[,n,...a]=e.split(" "),r={time:parseFloat(n.slice(0,n.length-1))+t,values:{klippy:{}}};let s="klippy";for(const i of a)if(i.endsWith(":"))s=i.slice(0,i.length-1),r.values[s]={};else{const[d,h]=i.split("=",2);(s?r.values[s]:r.values)[d]=parseFloat(h)}return r}function p(e){return e.slice(e.lastIndexOf("===== Config file =====")+24,e.lastIndexOf("======================="))}function o(e){const t=/^Start printer at [\w\d :]+ \((\d+\.\d+) (\d+\.\d+)\)$/m.exec(e);return console.log(t),t?parseFloat(t[1])-parseFloat(t[2]):0}function c(e){let t=o(e);return{raw:e,config:p(e),stats:e.split(`
`).reduce((n,a)=>(a.startsWith("Start printer at ")?(t=o(a),console.log("new epoch ",t)):a.startsWith("Stats ")&&n.push(l(a,t)),n),[])}}async function u(e){const t=(await Promise.all(Array.from(e).map(n=>new Promise(function(a,r){const s=new FileReader;s.onload=()=>a(s.result),s.onerror=r,s.readAsText(n)})))).join(`
`);return c(t)}async function f(e){switch(e.type){case"parseFiles":return{type:"parseFiles",klippyLog:await u(e.data)}}}globalThis.postMessage({type:"ready"}),globalThis.addEventListener("message",e=>f(e.data).then(t=>t&&globalThis.postMessage(t)))})();
//# sourceMappingURL=index.7d90dba9.js.map