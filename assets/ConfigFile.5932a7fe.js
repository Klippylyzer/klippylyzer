import{r as h,j as o,t as l,a as n,B as b,b as g,c as x,F as m,d as j}from"./index.3ff91169.js";class w{parse(i){const r={};let e=[],t=r,s=null;for(const a of i.split(`
`))if(a.startsWith("[")){e=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).split(" "),t=r;for(const d of e)t[d]||(t[d]={}),t=t[d]}else if(s&&a.startsWith("	"))t[s]?t[s]+=`
`+a.slice(1):t[s]=a.slice(1);else{s&&(s=null);const[d,f]=a.split("=",2).map(u=>u.trim());s=d,f&&(t[d.trim()]=f.toLocaleLowerCase()==="true"?!0:f.toLowerCase()==="false"?!1:/^\d+$/.test(f)?parseInt(f):/^\d+\.\d+$/.test(f)?parseFloat(f):f)}return r}}function C({klippyLog:c}){const i=h.exports.useMemo(()=>{const e=new w;try{return e.parse(c.config)}catch(t){return console.error(t),null}},[c]),r=h.exports.useCallback(()=>{if(!c)return;const e=new Blob([c.config],{type:"text/plain"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="printer.cfg",s.click()},[c]);return o("section",{children:[o("h2",{className:l("flex","flex-row","justify-between"),children:[n("span",{className:l("text-xl"),children:"Klipper Config"}),o(b,{btn:"Light",onClick:r,className:l("flex","flex-row"),children:[n(g,{})," download"]})]}),i&&n("div",{className:l("sticky","top-4","float-right"),children:o("ul",{children:[o("li",{className:l("text-lg","flex","justify-between","items-center"),children:["TOC",n("a",{href:"#",onClick:()=>window.scrollTo({top:0}),children:n(x,{})})]}),Object.entries(i).map(([e])=>n("li",{children:n("a",{href:"#"+["config",e].join("--"),className:l("text-gray-800","dark:text-gray-200"),children:e})},e))]})}),n("code",{children:i&&n(p,{object:i})})]})}function p({object:c,path:i=[]}){return n(m,{children:Object.entries(c).map(([r,e])=>o("div",{className:l("pl-4"),children:[o("div",{id:["config",i.join("-"),r].filter(Boolean).join("--"),className:l("font-bold","flex","align-top","gap-2"),children:[o("a",{className:l("group","focus:text-blue-300","dark:focus:text-blue-300"),href:"#"+["config",i.join("-"),r].filter(Boolean).join("--"),children:[n(j,{className:l("inline-block","mr-1","invisible","group-hover:visible")}),i.length===0?`[${r}]`:r]}),typeof e=="number"||typeof e=="boolean"?` = ${e}`:typeof e=="string"?o(m,{children:[" ","= ",n("pre",{className:"inline-block",children:e})]}):null]}),n("div",{className:l(),children:typeof e=="number"||typeof e=="boolean"||typeof e=="string"?null:e instanceof Array?n("ul",{children:e.map((t,s)=>n("li",{children:t},s))}):e instanceof Object?n(p,{path:[...i,r],object:e}):"ERROR"})]},r))})}export{C as default};
