!function(){function e(e){return e&&e.__esModule?e.default:e}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2;r.register("2J6gO",(function(t,n){var a,o,s,i,c;a=t.exports,Object.defineProperty(a,"__esModule",{value:!0,configurable:!0}),o=t.exports,s="default",i=function(){return A},Object.defineProperty(o,s,{get:i,set:c,enumerable:!0,configurable:!0});var l=r("5Sbbl"),u=r("4Z8U5"),d=r("lBpE3"),p=r("5O9u4"),m=r("3fYuu"),h=r("caeCS"),f=r("5RUSV"),x=r("jubMy"),b=r("dL2yA"),y=r("6cds3"),g=(y=r("6cds3"),r("5RRVy")),v=r("kOpwP"),k=r("dHI7O");function w(e){return j.apply(this,arguments)}function j(){return(j=l.wrapAsyncGenerator(e(u).mark((function r(t){var n,a,o,s,i,c,d,p,m,h,f,x,b;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t[1],a=2;case 2:if(!(a<t.length)){e.next=37;break}o=t[a],s=o.time-n.time,i=!0,c=!1,d=void 0,e.prev=6,p=Object.entries(o.temps)[Symbol.iterator]();case 8:if(i=(m=p.next()).done){e.next=19;break}if(h=l.slicedToArray(m.value,2),f=h[0],0!==(x=h[1])&&0!==n.temps[f]){e.next=12;break}return e.abrupt("continue",16);case 12:if(b=x-n.temps[f],!(Math.abs(b/s)>10)){e.next=16;break}return e.next=16,[f,[{name:"".concat(f," changed ").concat(b.toFixed(1),"C"),xAxis:a-1},{xAxis:a}]];case 16:i=!0,e.next=8;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(6),c=!0,d=e.t0;case 25:e.prev=25,e.prev=26,i||null==p.return||p.return();case 28:if(e.prev=28,!c){e.next=31;break}throw d;case 31:return e.finish(28);case 32:return e.finish(25);case 33:n=o;case 34:a++,e.next=2;break;case 37:case"end":return e.stop()}}),r,null,[[6,21,25,33],[26,,28,32]])})))).apply(this,arguments)}function A(r){var t=r.klippyLog,n=t.stats,a=t.epoch,o=y.useRef(null),s=l.slicedToArray(y.useState(null),2),i=s[0],c=s[1],p=l.slicedToArray(y.useState({}),2),m=p[0],f=p[1],j=y.useMemo((function(){return k.statsToTemps(n)}),[n]);return y.useEffect((function(){l.asyncToGenerator(e(u).mark((function r(){var t,n,a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.time("calc chartData"),t=Object.keys(j[0].temps),n={time:new Array(j.length),legend:t,series:t.map((function(e){return{name:e,type:"line",data:new Array(j.length)}}))},a=0;a<j.length;a++)t.forEach((function(e,r){n.series[r].data[a]=[j[a].time,j[a].temps[e]]}));console.timeEnd("calc chartData"),c(n);case 6:case"end":return e.stop()}}),r)})))()}),[a,j]),y.useEffect((function(){f({}),l.asyncToGenerator(e(u).mark((function r(){var t,n,a,o,s,i,c,d,p;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,n=!1,e.prev=1,o=l.asyncIterator(w(j));case 3:return e.next=5,o.next();case 5:if(!(t=!(s=e.sent).done)){e.next=10;break}i=s.value,c=l.slicedToArray(i,2),d=c[0],p=c[1],f(b.default((function(e){e[d]||(e[d]=[]),e[d].push(p)})));case 7:t=!1,e.next=3;break;case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),n=!0,a=e.t0;case 16:if(e.prev=16,e.prev=17,!t||null==o.return){e.next=21;break}return e.next=21,a.return();case 21:if(e.prev=21,!n){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(16);case 26:case"end":return e.stop()}}),r,null,[[1,12,16,26],[17,,21,25]])})))()}),[j,f]),d.jsxs("section",{children:[d.jsx("h3",{className:e(v)("text-xl"),children:"Temperatures over time"}),i?d.jsx(e(x),{echarts:h,ref:o,style:{height:m?"600px":"500px"},option:{darkMode:!0,textStyle:{color:"rgb(229, 231, 235)"},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},tooltip:{trigger:"axis"},dataZoom:[{type:"slider"},{type:"inside"}],legend:{textStyle:{color:"rgb(229, 231, 235)"},data:i.legend},grid:{top:m?180:80,bottom:100},xAxis:{type:"category",axisLabel:{formatter:function(e){return new Date(1e3*(parseFloat(e)+a)).toLocaleTimeString()}}},yAxis:{type:"value"},series:i.series.map((function(r){return l.objectSpread({},r,r.name in m?{markArea:{itemStyle:{color:e(g).red[500]},label:{offset:[-20,15],rotate:-60},data:m[r.name]}}:{})}))}}):d.jsx("div",{children:"Loading..."}),m&&i?d.jsxs("div",{className:e(v)("mt-2"),children:[d.jsx("h3",{className:e(v)("text-xl","text-red-400"),children:"Problems were identified"}),d.jsxs("article",{children:[d.jsx("p",{children:"Large jumps in temperature are often indicative of a broken wire, or a thermometer that is not working properly."}),"extruder"in m&&d.jsx("p",{})]}),d.jsx("table",{className:e(v)("table","table-zebra","table-compact","w-full"),children:Object.entries(m).map((function(r){var t=l.slicedToArray(r,2),n=t[0],o=t[1];return d.jsxs(y.Fragment,{children:[d.jsx("thead",{children:d.jsx("tr",{children:d.jsx("th",{className:e(v)("text-lg"),colSpan:2,children:n})})}),d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsx("td",{colSpan:2,children:"extruder"===n?"\n                        Your extruder is showing spikes in temperature. There is probably a loose crimp, or a broken\n                        wire in your cable chains.\n                        ":"bed"===n?"\n                        Your bed is showing spikes in temperature. If you have a moving bed, you probably have a loose\n                        crimp or a broken wire. If your bed is static, you have more serious problems.\n                        ":"\n                        Your thermometer ".concat(n," is showing spikes in temperature. If this thermometer moves, such \n                        as a chamber thermistor on a toolhead PCB, you most likely have a bad crimp or broken wire in \n                        your cable chain.\n\n                        If this is a static thermistor, you should check all wiring, crimps, and then verify other \n                        thermistors are working properly. Thermistors can rarely break, although it is also possible\n                        your control board has a problem. Bad wiring causing voltage to leak to ground is also a\n                        possibility.\n                        ")})}),o.map((function(e){var r=l.slicedToArray(e,1)[0];return d.jsxs("tr",{children:[d.jsx("td",{children:new Date(1e3*(a+r.xAxis)).toLocaleTimeString()}),d.jsx("td",{children:r.name})]},r.xAxis)}))]})]},n)}))})]}):null]})}h.use([p.LineChart,p.LinesChart,m.GridComponent,m.DatasetComponent,m.LegendComponent,m.TooltipComponent,m.TitleComponent,f.CanvasRenderer,m.MarkAreaComponent,m.DataZoomComponent,m.DataZoomInsideComponent,m.DataZoomSliderComponent,m.ToolboxComponent])}))}();
//# sourceMappingURL=TempGraph.e00a99f9.js.map
